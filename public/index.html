<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myDashboard</title>
    <!-- <script src="https://cdn.tailwindcss.com">  </script> -->
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.5/dist/purify.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link href="/output.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="feature-container flex flex-col">
            <button id="btn-logout" class="m-auto mb-3 mt-0 shadow-md bg-green-600 text-white py-2 px-3 rounded-md text-sm font-semibold cursor-pointer border-none whitespace-nowrap hover:bg-green-700" onclick="Logout()">Đăng xuất</button>
        </div>
        <h1 class="cursor-default text-3xl font-bold text-center mb-8 text-gray-800">Dashboard</h1>

        <div id="dashboard-container" class="dashboard-grid">

            <!-- Card 1: Thống kê nhanh -->
            <div id="stats-card" class="card">
                <div id="stats-header" class="card-header">
                    <span>Thống kê nhanh</span>
                </div>
                <div class="stat-item" id="total-stats-div">
                    <span>Tổng</span>
                    <span class="font-bold text-lg" id="total-stats">0</span>
                </div>
                <div class="stat-item text-[#FF0000]" id="deadlines-stats-div">
                    <span>Deadline</span>
                    <span class="font-bold text-lg" id="deadlines">0</span>
                </div>
                <div class="stat-item text-[#6484F0]" id="works-stats-div">
                    <span>Công việc</span>
                    <span class="font-bold text-lg" id="works-to-do">0</span>
                </div>
                <div class="stat-item text-[#88D31F]" id="learn-stats-div">
                    <span>Cần học</span>
                    <span class="font-bold text-lg" id="need-to-learn">0</span>
                </div>
                <div class="stat-item text-[#5941F2]" id="toDo-stats-div">
                    <span>Cần làm</span>
                    <span class="font-bold text-lg" id="tasks-to-do">0</span>
                </div>
                <div class="stat-item text-[#EF8D29]" id="goals-stats-div">
                    <span>Mục tiêu</span>
                    <span class="font-bold text-lg" id="current-goals">0</span>
                </div>
            </div>

            <!-- Card 2: Công việc và Deadline -->
            <div id="work-card" class="card">
                <div class="card-header">
                    <span>Công việc</span>
                    <div class="btn-container ml-auto">
                        <button class="btn-edit" onclick="changeTextView('work')" aria-label="Sửa">
                            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round">
                                </g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path class="icon-path" d="M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    </path>
                                </g>
                            </svg>
                        </button>
                        <button class="btn-add" onclick="openModal('work')" aria-label="Thêm mới">
                            <svg class="add-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> <title></title> 
                                    <g id="Complete"> 
                                        <g data-name="add" id="add-2"> 
                                            <g> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="12" x2="12" y1="19" y2="5"></line> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="5" x2="19" y1="12" y2="12"></line> 
                                            </g> 
                                        </g> 
                                    </g>        
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="scrollable-content" id="work-list-interface">
                    <ul class="task-list" id="work-list">
                    </ul>
                    <button class="btn-add ml-auto py-1 px-3" onclick="openModal('work')">Thêm</button>
                </div>

                <div class="min-h-[65%] min-w-[100%] ml-auto" id="work-taskRawTextInterface" style="display: none;">
                    <textarea id="work-raw-text" class="flex-grow w-full h-full p-2 border rounded-md" placeholder="[] Ten (dd/mm/yy)" spellcheck="false"></textarea>
                    <button type="submit" id="work-taskRawTextSubmitButton" class="btn-add ml-[75%] px-[20px] py-1">Lưu</button>
                </div>
            </div>

            <!-- Card 3: Học tập -->
            <div id="learning-card" class="card">
                <div class="card-header">
                    <span>Học tập</span>
                    <div class="btn-container ml-auto">
                        <button class="btn-edit" onclick="changeTextView('learning')" aria-label="Sửa">
                            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round">
                                </g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path class="icon-path" d="M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    </path>
                                </g>
                            </svg>
                        </button>
                        <button class="btn-add" onclick="openModal('learning')" aria-label="Thêm mới">
                            <svg class="add-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> <title></title> 
                                    <g id="Complete"> 
                                        <g data-name="add" id="add-2"> 
                                            <g> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="12" x2="12" y1="19" y2="5"></line> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="5" x2="19" y1="12" y2="12"></line> 
                                            </g> 
                                        </g> 
                                    </g>        
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="scrollable-content" id="learning-list-interface">
                    <ul class="task-list" id="learning-list">
                    </ul>
                    <button class="btn-add ml-auto py-1 px-3" onclick="openModal('learning')">Thêm</button>
                </div>

                <div class="min-h-[65%] min-w-[100%] ml-auto" id="learning-taskRawTextInterface" style="display: none;">
                    <textarea id="learning-raw-text" class="flex-grow w-full h-full p-2 border rounded-md" placeholder="Vd: [] Ten (dd/mm/yy)" spellcheck="false"></textarea>
                    <button type="submit" id="learning-taskRawTextSubmitButton" class="btn-add ml-[75%] px-[20px] py-1">Lưu</button>
                </div>
            </div>

            <!-- Card 4: Đời sống -->
            <div id="life-card" class="card">
                <div class="card-header">
                    <span>Đời sống</span>
                    <div class="btn-container ml-auto">
                        <button class="btn-edit" onclick="changeTextView('life')" aria-label="Sửa">
                            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round">
                                </g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path class="icon-path" d="M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    </path>
                                </g>
                            </svg>
                        </button>
                        <button class="btn-add" onclick="openModal('life')" aria-label="Thêm mới">
                            <svg class="add-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> <title></title> 
                                    <g id="Complete"> 
                                        <g data-name="add" id="add-2"> 
                                            <g> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="12" x2="12" y1="19" y2="5"></line> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="5" x2="19" y1="12" y2="12"></line> 
                                            </g> 
                                        </g> 
                                    </g>        
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="scrollable-content" id="life-list-interface">
                    <ul class="task-list" id="life-list">
                    </ul>
                    <button class="btn-add ml-auto py-1 px-3" onclick="openModal('life')">Thêm</button>
                </div>
                <div class="min-h-[65%] min-w-[100%] ml-auto" id="life-taskRawTextInterface" style="display: none;">
                    <textarea id="life-raw-text" class="flex-grow w-full h-full p-2 border rounded-md" placeholder="[] Ten (dd/mm/yy)" spellcheck="false"></textarea>
                    <button type="submit" id="life-taskRawTextSubmitButton" class="btn-add ml-[75%] px-[20px] py-1">Lưu</button>
                </div>
            </div>

            <!-- Card 5: Mục tiêu -->
            <div id="goals-card" class="card">
                <div class="card-header">
                    <span>Mục tiêu</span>
                    <div class="btn-container ml-auto">
                        <button class="btn-edit" onclick="changeTextView('goals')" aria-label="Sửa">
                            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round">
                                </g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path class="icon-path" d="M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    </path>
                                </g>
                            </svg>
                        </button>
                        <button class="btn-add" onclick="openModal('goals')" aria-label="Thêm mới">
                            <svg class="add-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> <title></title> 
                                    <g id="Complete"> 
                                        <g data-name="add" id="add-2"> 
                                            <g> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="12" x2="12" y1="19" y2="5"></line> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="5" x2="19" y1="12" y2="12"></line> 
                                            </g> 
                                        </g> 
                                    </g>        
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="scrollable-content" id="goals-list-interface">
                    <ul class="task-list" id="goals-list">
                    </ul>
                    <button class="btn-add ml-auto py-1 px-3" onclick="openModal('goals')">Thêm</button>
                </div>

                <div class="min-h-[65%] min-w-[100%] ml-auto" id="goals-taskRawTextInterface" style="display: none;">
                    <textarea id="goals-raw-text" class="flex-grow w-full h-full p-2 border rounded-md" placeholder="[] Ten (dd/mm/yy)" spellcheck="false"></textarea>
                    <button type="submit" id="goals-taskRawTextSubmitButton" class="btn-add ml-[75%] px-[20px] py-1">Lưu</button>
                </div>

            </div>
            
            <!-- Card 6: Ghi chú (dạng textbox) -->
            <div id="notes-card" class="card pb-1">
                <div class="card-header">
                    <span>Ghi chú</span>
                </div>
                <div id="noteView" class="prose w-[80%] p-2 border rounded-md scrollable-content cursor-pointer"></div>
                <textarea id="noteText" class="flex-grow w-full h-full p-2 border rounded-md hidden" placeholder="Nhập ghi chú của bạn vào đây..." spellcheck="false"></textarea>
                <button type="submit" id="noteSubmitButton"class="btn-add px-[20px] m-2 mr-0 ml-auto py-1">Lưu</button>
            </div>
            
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="info footer-item" >
                    <span>/by b1nhan, 2025.</span>
                </div>
                <div class="action-btn footer-item">
                    <a class="report-icon" aria-label="Góp Ý" href="https://www.facebook.com/messages/t/rizingggg" target="_blank" rel="noopener noreferrer">
                        <svg fill="#000000" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <path fill-rule="evenodd" d="M3.25 4a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h2.5a.75.75 0 01.75.75v3.19l3.427-3.427A1.75 1.75 0 0111.164 17h9.586a.25.25 0 00.25-.25V4.25a.25.25 0 00-.25-.25H3.25zm-1.75.25c0-.966.784-1.75 1.75-1.75h17.5c.966 0 1.75.784 1.75 1.75v12.5a1.75 1.75 0 01-1.75 1.75h-9.586a.25.25 0 00-.177.073l-3.5 3.5A1.457 1.457 0 015 21.043V18.5H3.25a1.75 1.75 0 01-1.75-1.75V4.25zM12 6a.75.75 0 01.75.75v4a.75.75 0 01-1.5 0v-4A.75.75 0 0112 6zm0 9a1 1 0 100-2 1 1 0 000 2z">
                                </path>
                            </g>
                        </svg>
                        <span class="tooltip-text">Gửi feedback, góp ý</span>
                    </a>
                    <a class="github-icon" aria-label="Github" href="https://github.com/b1nhan/myDashboard" target="_blank" rel="noopener noreferrer">
                        <svg viewBox="0 0 192 192" xmlns="http://www.w3.org/2000/svg" fill="none">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <path stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="12" d="M120.755 170c.03-4.669.059-20.874.059-27.29 0-9.272-3.167-15.339-6.719-18.41 22.051-2.464 45.201-10.863 45.201-49.067 0-10.855-3.824-19.735-10.175-26.683 1.017-2.516 4.413-12.63-.987-26.32 0 0-8.296-2.672-27.202 10.204-7.912-2.213-16.371-3.308-24.784-3.352-8.414.044-16.872 1.14-24.785 3.352C52.457 19.558 44.162 22.23 44.162 22.23c-5.4 13.69-2.004 23.804-.987 26.32C36.824 55.498 33 64.378 33 75.233c0 38.204 23.149 46.603 45.2 49.067-3.551 3.071-6.719 9.138-6.719 18.41 0 6.416.03 22.621.059 27.29M27 130c9.939.703 15.67 9.735 15.67 9.735 8.834 15.199 23.178 10.803 28.815 8.265">
                                </path>
                            </g>
                        </svg>
                        <span class="tooltip-text">Xem trên Github</span>   
                    </a>
                    <a class="star-icon" aria-label="Github Star" href="https://github.com/b1nhan/myDashboard/stargazers" target="_blank" rel="noopener noreferrer">
                        <svg viewBox="-2.4 -2.4 28.80 28.80" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0)">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.048"></g>
                            <g id="SVGRepo_iconCarrier"> 
                                <path d="M10.8613 9.36335C11.3679 8.45445 11.6213 8 12 8C12.3787 8 12.6321 8.45445 13.1387 9.36335L13.2698 9.59849C13.4138 9.85677 13.4858 9.98591 13.598 10.0711C13.7103 10.1563 13.8501 10.188 14.1296 10.2512L14.3842 10.3088C15.3681 10.5314 15.86 10.6427 15.977 11.0191C16.0941 11.3955 15.7587 11.7876 15.088 12.572L14.9144 12.7749C14.7238 12.9978 14.6285 13.1092 14.5857 13.2471C14.5428 13.385 14.5572 13.5336 14.586 13.831L14.6122 14.1018C14.7136 15.1482 14.7644 15.6715 14.4579 15.9041C14.1515 16.1367 13.6909 15.9246 12.7697 15.5005L12.5314 15.3907C12.2696 15.2702 12.1387 15.2099 12 15.2099C11.8613 15.2099 11.7304 15.2702 11.4686 15.3907L11.2303 15.5005C10.3091 15.9246 9.84847 16.1367 9.54206 15.9041C9.23565 15.6715 9.28635 15.1482 9.38776 14.1018L9.41399 13.831C9.44281 13.5336 9.45722 13.385 9.41435 13.2471C9.37147 13.1092 9.27617 12.9978 9.08557 12.7749L8.91204 12.572C8.2413 11.7876 7.90593 11.3955 8.02297 11.0191C8.14001 10.6427 8.63194 10.5314 9.61581 10.3088L9.87035 10.2512C10.1499 10.188 10.2897 10.1563 10.402 10.0711C10.5142 9.98591 10.5862 9.85677 10.7302 9.59849L10.8613 9.36335Z" stroke="#1C274C" stroke-width="1.5">
                                </path> 
                                <path d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round">
                                </path> 
                            </g>
                        </svg>
                        <span id="star-counting">Star</span>
                        <span class="tooltip-text">Give me a Star &lt;3</span>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal for adding new task -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 id="modal-title" class="text-2xl font-semibold mb-4">Thêm nội dung mới</h2>
            <form id="addTaskForm">
                <input type="hidden" id="taskType">
                <input type="hidden" id="taskID">
                <div class="mb-4">
                    <label for="taskName" class="block text-gray-700 font-semibold mb-2">Tên nội dung:</label>
                    <input type="text" id="taskName" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
                </div>
                <div class="mb-4">
                    
                    <label class="inline-flex items-center cursor-pointer mb-2">
                        <span class="block pr-3 text-gray-700 font-semibold">Ngày kết thúc</span>
                        <input type="checkbox" id="dateButtonTgg" value="" class="sr-only peer">
                        <div class="relative w-11 h-6 bg-gray-200 rounded-full peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"></div>
                    </label>
                    <input type="date" id="taskDate" class="hidden w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <button type="submit" id="submitButton"class="px-6 py-2 text-white font-semibold rounded-full transition-colors">Thêm</button>
            </form>
        </div>
    </div>

    <script src="/config.js"></script> 
    <script src="script.js"></script>
    <script src="auth.js"></script>
</body>
</html>
