<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myDashboard</title>
    <!-- <script src="https://cdn.tailwindcss.com">  </script> -->
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.5/dist/purify.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link href="/output.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="feature-container flex flex-col">
            <button id="btn-logout" class="m-auto mb-3 mt-0 shadow-md bg-green-600 text-white py-2 px-3 rounded-md text-sm font-semibold cursor-pointer border-none whitespace-nowrap hover:bg-green-700" onclick="Logout()">Đăng xuất</button>
        </div>
        <h1 class="cursor-default text-3xl font-bold text-center mb-8 text-gray-800">Dashboard</h1>

        <div id="dashboard-container" class="dashboard-grid">

            <!-- Card 1: Thống kê nhanh -->
            <div id="stats-card" class="card">
                <div class="card-header" style="margin: 0;">
                    <span>Thống kê nhanh</span>
                </div>
                <div class="stat-item">
                    <span>Tổng</span>
                    <span class="font-bold text-lg" id="total-stats">0</span>
                </div>
                <div class="stat-item text-[#FF0000]">
                    <span>Deadline</span>
                    <span class="font-bold text-lg" id="deadlines">0</span>
                </div>
                <div class="stat-item text-[#6484F0]">
                    <span>Công việc</span>
                    <span class="font-bold text-lg" id="works-to-do">0</span>
                </div>
                <div class="stat-item text-[#88D31F]">
                    <span>Cần học</span>
                    <span class="font-bold text-lg" id="need-to-learn">0</span>
                </div>
                <div class="stat-item text-[#5941F2]">
                    <span>Việc cần làm</span>
                    <span class="font-bold text-lg" id="tasks-to-do">0</span>
                </div>
                <div class="stat-item text-[#EF8D29]">
                    <span>Mục tiêu</span>
                    <span class="font-bold text-lg" id="current-goals">0</span>
                </div>
            </div>

            <!-- Card 2: Công việc và Deadline -->
            <div id="work-card" class="card">
                <div class="card-header">
                    <span>Công việc</span>
                    <div class="btn-container ml-auto">
                        <button class="btn-edit" onclick="changeTextView('work')" aria-label="Sửa">
                            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round">
                                </g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path class="icon-path" d="M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    </path>
                                </g>
                            </svg>
                        </button>
                        <button class="btn-add" onclick="openModal('work')" aria-label="Thêm mới">
                            <svg class="add-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> <title></title> 
                                    <g id="Complete"> 
                                        <g data-name="add" id="add-2"> 
                                            <g> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="12" x2="12" y1="19" y2="5"></line> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="5" x2="19" y1="12" y2="12"></line> 
                                            </g> 
                                        </g> 
                                    </g>        
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="scrollable-content" id="work-list-interface">
                    <ul class="task-list" id="work-list">
                    </ul>
                    <button class="btn-add ml-auto py-1 px-3" onclick="openModal('work')">Thêm</button>
                </div>

                <div class="min-h-[65%] min-w-[100%] ml-auto" id="work-taskRawTextInterface" style="display: none;">
                    <textarea id="work-raw-text" class="flex-grow w-full h-full p-2 border rounded-md" placeholder="[] Ten (dd/mm/yy)" spellcheck="false"></textarea>
                    <button type="submit" id="work-taskRawTextSubmitButton" class="btn-add ml-[75%] px-[20px]">Lưu</button>
                </div>
            </div>

            <!-- Card 3: Học tập -->
            <div id="learning-card" class="card">
                <div class="card-header">
                    <span>Học tập</span>
                    <div class="btn-container ml-auto">
                        <button class="btn-edit" onclick="changeTextView('learning')" aria-label="Sửa">
                            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round">
                                </g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path class="icon-path" d="M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    </path>
                                </g>
                            </svg>
                        </button>
                        <button class="btn-add" onclick="openModal('learning')" aria-label="Thêm mới">
                            <svg class="add-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> <title></title> 
                                    <g id="Complete"> 
                                        <g data-name="add" id="add-2"> 
                                            <g> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="12" x2="12" y1="19" y2="5"></line> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="5" x2="19" y1="12" y2="12"></line> 
                                            </g> 
                                        </g> 
                                    </g>        
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="scrollable-content" id="learning-list-interface">
                    <ul class="task-list" id="learning-list">
                    </ul>
                    <button class="btn-add ml-auto py-1 px-3" onclick="openModal('learning')">Thêm</button>
                </div>

                <div class="min-h-[65%] min-w-[100%] ml-auto" id="learning-taskRawTextInterface" style="display: none;">
                    <textarea id="learning-raw-text" class="flex-grow w-full h-full p-2 border rounded-md" placeholder="Vd: [] Ten (dd/mm/yy)" spellcheck="false"></textarea>
                    <button type="submit" id="learning-taskRawTextSubmitButton" class="btn-add ml-[75%] px-[20px]">Lưu</button>
                </div>
            </div>

            <!-- Card 4: Đời sống -->
            <div id="life-card" class="card">
                <div class="card-header">
                    <span>Đời sống</span>
                    <div class="btn-container ml-auto">
                        <button class="btn-edit" onclick="changeTextView('life')" aria-label="Sửa">
                            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round">
                                </g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path class="icon-path" d="M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    </path>
                                </g>
                            </svg>
                        </button>
                        <button class="btn-add" onclick="openModal('life')" aria-label="Thêm mới">
                            <svg class="add-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> <title></title> 
                                    <g id="Complete"> 
                                        <g data-name="add" id="add-2"> 
                                            <g> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="12" x2="12" y1="19" y2="5"></line> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="5" x2="19" y1="12" y2="12"></line> 
                                            </g> 
                                        </g> 
                                    </g>        
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="scrollable-content" id="life-list-interface">
                    <ul class="task-list" id="life-list">
                    </ul>
                    <button class="btn-add ml-auto py-1 px-3" onclick="openModal('life')">Thêm</button>
                </div>
                <div class="min-h-[65%] min-w-[100%] ml-auto" id="life-taskRawTextInterface" style="display: none;">
                    <textarea id="life-raw-text" class="flex-grow w-full h-full p-2 border rounded-md" placeholder="[] Ten (dd/mm/yy)" spellcheck="false"></textarea>
                    <button type="submit" id="life-taskRawTextSubmitButton" class="btn-add ml-[75%] px-[20px]">Lưu</button>
                </div>
            </div>

            <!-- Card 5: Mục tiêu -->
            <div id="goals-card" class="card">
                <div class="card-header">
                    <span>Mục tiêu</span>
                    <div class="btn-container ml-auto">
                        <button class="btn-edit" onclick="changeTextView('goals')" aria-label="Sửa">
                            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round">
                                </g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path class="icon-path" d="M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    </path>
                                </g>
                            </svg>
                        </button>
                        <button class="btn-add" onclick="openModal('goals')" aria-label="Thêm mới">
                            <svg class="add-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> <title></title> 
                                    <g id="Complete"> 
                                        <g data-name="add" id="add-2"> 
                                            <g> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="12" x2="12" y1="19" y2="5"></line> 
                                                <line class="icon-path" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="5" x2="19" y1="12" y2="12"></line> 
                                            </g> 
                                        </g> 
                                    </g>        
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="scrollable-content" id="goals-list-interface">
                    <ul class="task-list" id="goals-list">
                    </ul>
                    <button class="btn-add ml-auto py-1 px-3" onclick="openModal('goals')">Thêm</button>
                </div>

                <div class="min-h-[65%] min-w-[100%] ml-auto" id="goals-taskRawTextInterface" style="display: none;">
                    <textarea id="goals-raw-text" class="flex-grow w-full h-full p-2 border rounded-md" placeholder="[] Ten (dd/mm/yy)" spellcheck="false"></textarea>
                    <button type="submit" id="goals-taskRawTextSubmitButton" class="btn-add ml-[75%] px-[20px]">Lưu</button>
                </div>

            </div>
            
            <!-- Card 6: Ghi chú (dạng textbox) -->
            <div id="notes-card" class="card pb-1">
                <div class="card-header">
                    <span>Ghi chú</span>
                </div>
                <div id="noteView" class="prose w-full h-full p-2 border rounded-md scrollable-content cursor-pointer"></div>
                <textarea id="noteText" class="flex-grow w-full h-full p-2 border rounded-md hidden" placeholder="Nhập ghi chú của bạn vào đây..." spellcheck="false"></textarea>
                <button type="submit" id="noteSubmitButton"class="btn-add px-[20px] m-2 mr-0 ml-auto">Lưu</button>
            </div>
            
        </div>
    </div>

    <!-- Modal for adding new task -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 id="modal-title" class="text-2xl font-semibold mb-4">Thêm nội dung mới</h2>
            <form id="addTaskForm">
                <input type="hidden" id="taskType">
                <input type="hidden" id="taskID">
                <div class="mb-4">
                    <label for="taskName" class="block text-gray-700 font-semibold mb-2">Tên nội dung:</label>
                    <input type="text" id="taskName" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="mb-4">
                    
                    <label class="inline-flex items-center cursor-pointer mb-2">
                        <span class="block pr-3 text-gray-700 font-semibold">Ngày kết thúc</span>
                        <input type="checkbox" id="dateButtonTgg" value="" class="sr-only peer">
                        <div class="relative w-11 h-6 bg-gray-200 rounded-full peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                    <input type="date" id="taskDate" class="hidden w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <button type="submit" id="submitButton"class="px-6 py-2 bg-blue-500 text-white font-semibold rounded-full hover:bg-blue-600 transition-colors">Thêm</button>
            </form>
        </div>
    </div>

    <script src="/config.js"></script> 
    <script src="script.js"></script>
    <script src="auth.js"></script>
</body>
</html>
